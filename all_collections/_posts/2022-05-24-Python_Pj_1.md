---
layout: post
title: 동국고생을 위한 남은 시간 계산기
date: 2022-05-22
categories: [PYTHON, Pj_Timer]
---

# 파이썬 프로젝트 : 시간 계산기

동탄국제고등학교는 학생 전원이 기숙사 생활을 하고 있으며,
매주 금요일에 귀가하게 된다.

따라서 모든 동국고생이 손꼽아 기다리는 날이 바로 금요일일 것이다.



## 시간 계산기 : 기획 의도

이번 프로젝트는 PYQT5 디자이너 그리고 tkinter를 사용하여
단순한 GUI를 띄우는 것이 최종 목표였다.

또한 힘든 학교 생활 중 점점 줄어드는 남은 시간을 보며 
희망(?)을 가질 수 있도록 하고 싶었다.

물론 단순하게 시간의 뺄셈을 이용하여 구하는 모듈을 사용할 수도 있겠지만
쓸데없는 오기가 생겨 그냥 코드를 다 내려적었다.

`금요일 16:00을 기준으로 하였음`



## 사용 모듈

```python
from datetime import datetime
from tkinter import *
```

그냥 `datetime`로 시간 관련 계산하고,
`tkinter`로 GUI를 짰다.

`tkinter`가 생각보다 많이 간편해서 그냥 몇줄 썼더니 대충 화면에 
띄우는건 문제가 없었다.

`datetime`은 처음 써보는 모듈이긴 하나 이것 또한 어렵지 않았다.



## 변수

```python
    now = datetime.now()
    current_day = int(now.strftime("%w"))
    current_hour = int(now.strftime("%H"))
    current_min = int(now.strftime("%M"))
    current_sec = int(now.strftime("%S"))
    left_day = 4 - current_day
    left_hour = 0
    left_min = 0
    left_sec = 0
```

변수는 이렇게 총 9개를 작성하였다.
우선 `now`는 현재 시간을 불러왔다.
그리고 밑에 `current_~` 변수들은 `now.strftime("%~")`를 사용해 
현재 요일, 시간, 분, 초를 각각 저장시켰다.

|구문 | 반환            |
|:---|:---------------|
| %w | 요일 (일:0~토:6) |
| %H | 시간 (24시간)    |
| %M | 분             |
| %S | 초             |

더 자세한건 이쪽으로: https://docs.python.org/ko/3/library/datetime.html

`left_~` 변수들은 마지막에 계산 결과를 담을 변수들이다.



## 시간 계산

```python
    if current_day == 4:
        left_hour = (24 - current_hour) + 16
    elif current_day == 5:
        left_hour = 16 - current_hour
    elif current_day == 6 or 0:
        label1.config(text="이미 집이잖아")
    else:
        left_hour = 24 * left_day + (24 - current_hour) + 16

    # 분 계산
    if current_min != 0:
        left_hour -= 1
    left_min = 60 - current_min

    # 초 계산
    if current_sec != 0:
        left_min -= 1
    left_sec = 60 - current_sec
```

1) 오늘이 목요일일 때:
목요일 남은 시간 + 금요일 16시간

2) 오늘이 금요일일 때:
금요일 남은시간

3) 오늘이 토, 일일 때:
라벨에 이미 집이라고 출력 (다음 버전에 시간 별  업데이트 예정)

4) 월 ~ 수
남은일수(금요일 제외) * 24시간 + 오늘 남은시간 + 금요일 16시간

그리고 분, 초 계산도 60에서 현재 초를 빼고
한 단위 위의 수를 1씩 빼는 방식으로 코드를 작성하였다.



## GUI 띄우기

```python
label1.config(text=(str(left_hour) + "시간   " + str(left_min) + "분   " + str(left_sec) + "초"))
```

숫자 계산을 마친 후 `str`로 바꿔서 label에 띄운다. 
버튼을 누르면 label이 표시될 수 있도록 위의 모든 부분을 함수로 감쌌다.

<img src="/assets/Pj_Timer/Before.png" width="400" height="160">

```python
window = Tk()
window.title("집이요...")
window.geometry("300x100")
window.resizable(False, False)

label1 = Label(window, text="남은 시간은...")
label1.pack()

while True:
    btn1 = Button(window, text="집에 언제갈까요?", command=bt1go)
    btn1.pack()
    window.mainloop()
```

<img src="/assets/Pj_Timer/After.png" width="400" height="160">

창 띄우고, 제목은 "집이요...", 창 크기는 300에 200으로 고정시켰다.
`While True`로 무한 루프문 만들고 그 속에 버튼을 클릭시 위의 모든 코드를 담은 함수 `bt1go`가 실행되도록 하였다.

<img src="/assets/Pj_Timer/Be-Af.gif" width="400" height="160">



## 전체코드

```python
from datetime import datetime
from tkinter import*


def bt1go():
    now = datetime.now()
    current_day = int(now.strftime("%w"))
    current_hour = int(now.strftime("%H"))
    current_min = int(now.strftime("%M"))
    current_sec = int(now.strftime("%S"))
    left_day = 4 - current_day
    left_hour = 0
    left_min = 0
    left_sec = 0

    # 시간 계산
    if current_day == 4:
        left_hour = (24 - current_hour) + 16
    elif current_day == 5:
        left_hour = 16 - current_hour
    elif current_day == 6 or 0:
        label1.config(text="이미 집이잖아")
    else:
        left_hour = 24 * left_day + (24 - current_hour) + 16

    # 분 계산
    if current_min != 0:
        left_hour -= 1
    left_min = 60 - current_min

    # 초 계산
    if current_sec != 0:
        left_min -= 1
    left_sec = 60 - current_sec

    label1.config(text=(str(left_hour) + "시간   " + str(left_min) + "분   " + str(left_sec) + "초"))


window = Tk()
window.title("집이요...")
window.geometry("300x100")
window.resizable(False, False)

label1 = Label(window, text="남은 시간은...")
label1.pack()

while True:
    btn1 = Button(window, text="집에 언제갈까요?", command=bt1go)
    btn1.pack()
    window.mainloop()
```



## 결론

파이썬은 간결함이 최고의 무기인 것 같다.
GUI를 뚝딱 만들어내는 무시무시함을 몸소 느꼈다.
이번 프로젝트는 앞으로 계속 업데이트하여 
투박하지 않고 감각적인 GUI를 구현해내는 것이 최종 목표이다.


